<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Dual Mouse Odometry</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Joshua Vasquez">

    <!-- Le styles -->
    <link href="../../assets/css/bootstrap-custom.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet">


    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../../assets/ico/favicon.png">
    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Days+One|Titillium+Web' rel='stylesheet' type='text/css'>

  </head>

   <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../../../index.html">Joshua Vasquez</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="../about.html">About</a></li>
              <li><a href="../projectsList.html">Projects</a></li>
              <li><a href="../tutorialsList.html">Tutorials</a></li>
              <li><a href="../resources.html">Resources</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

<body data-spy="scroll" data-target=".bs-docs-sidebar">


<div class="span2 bs-docs-sidebar">
<ul class="nav nav-list bs-docs-sidenav affix">
          <li><a href="#Introduction"><i class="icon-chevron-right"></i>Introduction</a></li>
          <li><a href="#MotionModel"><i class="icon-chevron-right"></i>MotionModel</a></li>
          <li><a href="#Resources"><i class="icon-chevron-right"></i>Resources</a></li>
        </ul>
</div>


<div class="span9">


      <h3 style="text-align: center;">Dual Optical Mouse Odometry Round II</h3>
<center>
<h4 style="text-align: center;">
A new motion model
</h4>
</center>


<section id="Introduction">

<div class="page-header">
<h3> Introduction</h3>
</div>

<p>
Stumbling around the internet, I discovered an inspirational piece of example code
from <a href="https://github.com/mickman112/manyMouse-combined-input/blob/master/src/testApp.cpp">mickman112</a>
that takes in two mice as input and visualizes their movement. 
With a few modifications, I revised the original motion model for dual mouse
odometry to create a simpler, but just as effective, implementation.
  In the following sections, I'll guide you 
through this model, which handles the notion that the distance between 
the two mice is not fixed.
</p>
</section>



<section id="MotionModel">
<div class="page-header">
<h3>The Motion Model</h3>
<p>
The goal is to estimate the <i>pose</i>, <i>(x,y,&theta;)</i>, of the robot relative
to a coordinate frame fixed to environment.  To do this, we examine the raw output
of the left and right mouses, which are placed under the robot.
</p>

<p>
<center>
<img src="../../assets/img/Tutorials/dualMouseOdometryTutorial/odometryPic1.png" width=400>
</center>
The two mice begin at known initial starting locations. In this case, both mice
have the same orientation, and the robot has been placed at (0,0,0) in the
environment.

At the first time step, both mice displace by distinct <i>&Delta;X</i> and <i>&Delta;Y</i>
values.  We can see these by the two new vectors, <i>l<sub>i</sub></i> and  <i>r<sub>i</sub></i>
drawn from the origin. 
<center>
<img src="../../assets/img/Tutorials/dualMouseOdometryTutorial/odometryPic2.png" width=400>
</center>
The first step is to calculate how much the robot has translated in the first
time step.  Since the robot had a previous orientation of &theta; = 0, the current robot position,
<i>(x,y)</i> is simply the average of the two mouse translations.

To calculate the current orientation, we start by generating vectors <i><b>u</b></i> and <i><b>v</b></i> 
from 
<i><b>u</b> = <b>r<sub>1</sub></b> - <b>l<sub>1</sub></b></i> 
and 
<i><b>v</b> = <b>r<sub>i</sub></b> - <b>l<sub>i</sub></b></i> 
<p>
Thus, <i>&theta; = </i>arccos(<i><b>u</b> &middot;<b>v</b>)</i>
</p>

<center>
<img src="../../assets/img/Tutorials/dualMouseOdometryTutorial/odometryPic3.png" width=400>
</center>

In the next time step, suppose the robot drives straight.  Once again, the two mice each 
return  <i> &Delta;X</i> and <i>&Delta;Y</i> values read from the ground. (Note that 
&Delta;X should be 0 for both mice if the robot is really moving straight.)  
<center>
<img src="../../assets/img/Tutorials/dualMouseOdometryTutorial/odometryPic4.png" width=400>
</center>

This
time, however, the robot frame is no longer aligned with the environment's 
coordinate frame; they are 
relative to the robot's rotated coordinate frame.  To deduce the new <i>pose</i>
based on this new information, we must first transform the raw mouse values into 
the environment frame with a rotation matrix,
<img src='http://mathworld.wolfram.com/images/equations/RotationMatrix/NumberedEquation1.gif'>
 where the rotation angle is simply the
current angle of the robot relative to the starting frame. 

Thus, after adding the corrected <i>&Delta;X</i> and <i> &Delta;Y</i> values to the
current <i><b>l<sub>1</sub></b></i> and <i><b>r<sub>1</sub></b></i> vectors, the 
overall position and angle may be computed again from the average position and
angle <i>&theta;</i> given by <i><b>u</b></i> and <i><b>v</b></i>. 
<center>
<img src="../../assets/img/Tutorials/dualMouseOdometryTutorial/odometryPic5.png" width=400>
</center>
From here, the process repeats for every time step! 
</p>
</div>


<section id="Resources">
<div class="page-header">
<h3>Resources</h3>
<p>
<a href='http://botsnlinux.net/school_projects/mouse_paper_colloquium_22march11.pdf'>High-Precision Robot Odometry Using an Array of Optical Mice</a>
<br>
This paper describes a clever model that, with least-squares fitting theoretically,
 gets more accurate odometry data by increasing the number of mice that are used for odometry.  
</p>

<p>
<a href='http://chrome.ws.dei.polimi.it/images/5/56/Bonarini_2004_ICINCO.pdf'>Dead Reckoning For Mobile Robots Using Two Optical Mice</a>
<br>
This paper contains the motion model that we did implement using our two mice offset by the distance <i>D</i>.
</p>


<p>
</p>
</div>



</div>

    <div class="container">
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>

  </body>
</html>
