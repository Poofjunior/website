<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FPGA Implementation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Joshua Vasquez">

    <!-- Le styles -->
    <link href="../../assets/css/bootstrap-custom.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet">


    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../../assets/ico/favicon.png">
    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Days+One|Titillium+Web' rel='stylesheet' type='text/css'>

  </head>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Joshua Vasquez</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="../about.html">About</a></li>
              <li><a href="../projectsList.html">Projects</a></li>
              <li><a href="../Research.html">Research</a></li>
              <li><a href="../tutorialsList.html">Tutorials</a></li>
              <li><a href="../resources.html">Resources</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>





<body data-spy="scroll" data-target=".bs-docs-sidebar">




<div class="span9">


      <h3 style="text-align: center;">An FPGA Implementation</h3>
<center>
<img src="../../assets/img/Tutorials/RotaryEncoderFPGA/FPGA.jpg" width=700>
</center>
<h3> Intro</h3>
<p> 
In this example, 
I've implemented a synchronous (driven by a clock) encoder decrypter on a DE0 
Nano FPGA. 
</p>



<div class="page-header">
<h3>A note about Synchronous Design</h3>
<p>
The encoder FSM (described in the 
<a href='../OpticalRotaryEncoderTheory.html'>previous page</a>) details the 
state logic of the flip flops.  For simplicity, I chose to implement
synchronous, rather than asynchronous design.  Thus, the state machine
evaluates the current conditions at a set clock frequency, rather than 
when the current conditions change.  Asynchronous design, while having
the advantage of being independent of a clock, is more complicated to 
implement on an FPGA.  
Unfortunatetly, if the Encoder waveform changes faster than the state 
machine can evaluate it, the state machine will miss counts. 
Howver, If the clock frequency of the FPGA is sufficiently faster than the 
frequency of the encoder waveform, then the FPGA will be able to keep track
of the rotations of the encoder. This is more clearly detailed in the image
below, where the thin pattern of vertical lines represents instances in 
time where the waveforms are sampled.  
</p>
<img src="../../assets/img/Tutorials/RotaryEncoderFPGA/clk.svg" width=800>
<p>
A question worth asking: <i>Just how fast does the FPGA need to be to 
ensure that it never misses a state change?</i> Here's 
a back-of-the-envelope calculation: 
</p>
<p>
From the datasheet, the encoder can spin at 30,000 [RPM] maximum. The encoder in 
this example has a 
<i>count-per-revolution</i> (CPR) of 500, bumped up to 2000, by reading 
edge transitions. Thus, 30,000 [RPM] translates to 1 million edge transitions
per second on the encoder output.  Luckily, the clock speed of the DE0 Nano 
is 50 [Mhz], or 50 million evaluations of the waveform per second, a rate
that's well above the max speed of the encoder. 
</p>

</div>



<section id="Resources">
<div class="page-header">
<h3> Resources</h3>
<a href='http://www.avagotech.com/docs/AV02-1132EN'>HEDS 9140 Optical Encoder Datasheet</a><br>


</div>
</section>

<section id="ProjectFiles">
<div class="page-header">
<h3> Project Files</h3>
<p>
The full Source code can be downloaded from Github 
<a href='https://github.com/Poofjunior/SynchronousQuadratureEncoder'>here</a>.
Enjoy!
</p>
</div>
</section>

    <div class="container">
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap-transition.js"></script>
    <script src="../assets/js/bootstrap-alert.js"></script>
    <script src="../assets/js/bootstrap-modal.js"></script>
    <script src="../assets/js/bootstrap-dropdown.js"></script>
    <script src="../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../assets/js/bootstrap-tab.js"></script>
    <script src="../assets/js/bootstrap-tooltip.js"></script>
    <script src="../assets/js/bootstrap-popover.js"></script>
    <script src="../assets/js/bootstrap-button.js"></script>
    <script src="../assets/js/bootstrap-collapse.js"></script>
    <script src="../assets/js/bootstrap-carousel.js"></script>
    <script src="../assets/js/bootstrap-typeahead.js"></script>

  </body>


<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.









</html>
